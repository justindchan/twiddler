<!DOCTYPE html>
<html>
  <head>
    <link rel='stylesheet' type='text/css' href='twiddler.css'>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>

  </head>
  <body>
    <div class='newsfeed'>
       
    
    </div>
    <script>

      $(document).ready(function(){
        var $newsfeed = $('.newsfeed');
        $newsfeed.html('');
        var tweetDates = [];
        var index = streams.home.length - 1;
        while(index >= 0){
          var tweet = streams.home[index];
          var $tweet = $('<div class="tweet"></div>');
          
          $tweet.text('@' + tweet.user + ': ' + tweet.message + ' Created on: ' + tweet.created_at);
          

          $tweet.appendTo($newsfeed);
          index -= 1;
          tweetDates.push(tweet.created_at);
        }
        //setTimeout check every 30s if tweets length has changed, display new
        // reversed while loop, starting at 0 instead of end, added if statement to check for previous time stamps of tweets to ommit them.

        var addNewTweets = function(){
          var index = 0;
          while(index < streams.home.length){
            var tweet = streams.home[index];
            if(tweetDates.includes(tweet.created_at)){
              index += 1;
            } else {
              var $tweet = $('<div class="tweet"></div>');
              $tweet.text('@' + tweet.user + ': ' + tweet.message + ' Created on: ' + tweet.created_at);
              $tweet.prependTo($newsfeed);
              index += 1;
              tweetDates.push(tweet.created_at);
          }
         }
        };

        var scheduleNextCheck = function(){
          addNewTweets();
          setTimeout(scheduleNextCheck, 1500);
        };

        scheduleNextCheck();

        //$(), selector to select usernames
        //add on click event 
        //use event.target to save currently selected username in var
        //clear content of body and add new content by replicating same process but 
        //tweet = streams.user[username] instead of tweet = streams.home
      });

    </script>
  </body>
</html>
